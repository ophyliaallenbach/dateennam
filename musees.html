<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mes Mus√©es 2026 üèõÔ∏è</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <style>
        body { background-color: #E3F2FD; color: #0D47A1; font-family: 'Segoe UI', sans-serif; padding: 20px; }
        h1 { text-align: center; color: #1565C0; margin-bottom: 40px; margin-top: 50px; }
        
        /* BOUTON DECONNEXION (Fix√© et visible) */
        .btn-logout {
            position: fixed; /* Reste toujours visible */
            top: 20px;
            right: 20px;
            background-color: #ff5252;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        .btn-logout:hover { background-color: #d32f2f; }

        /* LAYOUT */
        .top-section { display: flex; gap: 30px; max-width: 1200px; margin: 0 auto; align-items: flex-start; }
        .form-container { flex: 1; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: sticky; top: 20px; }
        
        /* CAROUSEL (Partie Droite) */
        .carousel-container { 
            flex: 1; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 15px; 
            min-height: 300px;
            background: rgba(255,255,255,0.5);
            border-radius: 20px;
            padding: 20px;
        }
        
        .card-tinder { 
            background: white; 
            width: 100%; 
            max-width: 320px; 
            padding: 25px; 
            border-radius: 15px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); 
            border: 1px solid #BBDEFB; 
            position: relative; 
            text-align: center;
        }
        
        .arrow-btn {
            background: #1976D2; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .arrow-btn:hover { background: #1565C0; transform: scale(1.1); }
        .arrow-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }

        /* BADGES */
        .badge-gratuit { display: inline-block; background: #ffecb3; color: #f57f17; padding: 4px 8px; border-radius: 12px; font-size: 0.8em; margin: 2px; }

        /* LISTE VISITES */
        .history-section { max-width: 1200px; margin: 50px auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .visite-row { border-bottom: 1px solid #eee; padding: 15px 0; display: flex; justify-content: space-between; align-items: center; }
        
        /* CHAMPS */
        input[type="text"], input[type="number"], input[type="date"], select, textarea { width: 100%; padding: 12px; margin: 8px 0 15px 0; border: 1px solid #90CAF9; border-radius: 8px; box-sizing: border-box; }
        
        /* CHECKBOXES TAGS */
        .gratuites-container { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .gratuites-container label { 
            background: #E1F5FE; color: #0277BD; padding: 5px 10px; border-radius: 15px; font-size: 0.9em; cursor: pointer; display: flex; align-items: center; border: 1px solid #B3E5FC;
        }
        .gratuites-container input { width: auto; margin-right: 5px; }
        .gratuites-container label:hover { background: #B3E5FC; }

        /* DETAILS CACHES */
        #detailsVisite { display: none; background-color: #E1F5FE; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 2px dashed #81D4FA; }
        
        /* BOUTONS PRINCIPAUX */
        button.btn-save { width: 100%; padding: 12px; background-color: #1976D2; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 18px; font-weight: bold; transition: 0.3s; }
        button.btn-save:hover { background-color: #1565C0; }
        
        /* Quand on est en mode modification */
        button.btn-save.mode-edit { background-color: #FF9800; } 
        button.btn-save.mode-edit:hover { background-color: #F57C00; }

        button.btn-check { background: #4CAF50; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; width: 100%; margin-top: 15px; font-size: 16px; }
        
        .main-checkbox { display: flex; align-items: center; margin-bottom: 20px; cursor: pointer; font-weight: bold; color: #1565C0; border-top: 1px solid #eee; padding-top: 15px; }
        .main-checkbox input { width: auto; margin: 0 10px 0 0; transform: scale(1.5); }
    </style>
</head>
<body>

    <button class="btn-logout" onclick="deconnexion()">D√©connexion ‚úåÔ∏è</button>

    <h1>üèõÔ∏è Mes Mus√©es en 2026</h1>

    <div class="top-section">
        <div class="form-container">
            <h2 id="titreFormulaire">Ajouter un mus√©e</h2>
            <input type="hidden" id="editId">

            <input type="text" id="nomMusee" placeholder="Nom du mus√©e (ex: Louvre)">
            <input type="text" id="nomExpo" placeholder="Nom de l'expo (ou 'Permanente')">
            <input type="number" id="prixMusee" placeholder="Prix (‚Ç¨)">

            <p style="margin: 0 0 10px 0; font-weight: bold; font-size: 0.9em; color:#555;">R√©ductions / Gratuit√©s :</p>
            <div class="gratuites-container" id="tagsContainer">
                <label><input type="checkbox" value="Icom"> Icom</label>
                <label><input type="checkbox" value="Etudiant"> √âtudiant</label>
                <label><input type="checkbox" value="RSA"> RSA</label>
                <label><input type="checkbox" value="-26ans"> -26 ans</label>
                <label><input type="checkbox" value="Navigo"> Navigo</label>
